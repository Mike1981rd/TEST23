@using AuroraPOS.Services;
@model LoginViewModel
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = null;

    var lstDatos = new List<KeyValuePair<string, string>>();
    var Central = new CentralService();

    if (Model.UserName != null)
    {
        var lstCompanies = Central.GetAllowedCompanies(Model.UserName);

        foreach (var item in lstCompanies)
        {
            lstDatos.Add(new KeyValuePair<string, string>(item.Database, item.Name));
        }
    }

    var SelectDatabase = new SelectList(lstDatos, "Key", "Value");
}




 <!DOCTYPE html>
<html lang="en"
      class="dark-style layout-wide customizer-hide"
      dir="ltr"
      data-theme="theme-default"
      data-assets-path="/"
      data-template="horizontal-menu-template"
      data-style="dark">
<head>
    <meta charset="utf-8" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

    <title>Login - Aurora POS</title>

    <meta name="description" content="" />

    <!-- Favicon -->


    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&ampdisplay=swap"
          rel="stylesheet" />

    <!-- Icons -->
    <link rel="stylesheet" href="/vendor/fonts/fontawesome.css" />
    <link rel="stylesheet" href="/vendor/fonts/tabler-icons.css" />
    <link rel="stylesheet" href="/vendor/fonts/flag-icons.css" />

    <!-- Core CSS -->

    <link rel="stylesheet" href="/vendor/css/rtl/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="/vendor/css/rtl/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="/vendor/css/rtl/theme-default.css" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="/vendor/css/rtl/theme-default.css" class="template-customizer-theme-css" />

    <link rel="stylesheet" href="/css/demo.css" />

    <!-- Vendors CSS -->
  
    <link rel="stylesheet" href="/vendor/libs/node-waves/node-waves.css" />

    <link rel="stylesheet" href="/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />
    <link rel="stylesheet" href="/vendor/libs/typeahead-js/typeahead.css" />
    <!-- Vendor -->
    <link rel="stylesheet" href="/vendor/libs/form-validation/form-validation.css" />

    <!-- Page CSS -->
    <!-- Page -->
    <link rel="stylesheet" href="/vendor/css/pages/page-auth.css" />

    <!-- Helpers -->
    <script src="/vendor/js/helpers.js"></script>
    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Template customizer: To hide customizer set displayCustomizer value false in config.js.  -->
    <script src="/vendor/js/template-customizer.js"></script>

    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="/js/config.js"></script>

    <style>
        .icon-black {
            color: black;
        }

        [data-style="dark"] .form-label,
        [data-style="dark"] .form-control,
        [data-style="dark"] .form-addons,
        [data-style="dark"] .icon-black,
        [data-style="dark"] h4,
        [data-style="dark"] p,
        [data-style="dark"] label,
        [data-style="dark"] span {
            color: #fff; /* Cambia los textos de las etiquetas y entradas a blanco */
        }

        [data-style="dark"] input::placeholder {
            color: #fff; /* Opcional: Cambia el color del texto placeholder en modo oscuro */
        }

        [data-style="dark"] select.form-control,
        [data-style="dark"] .input-group-text {
            color: #fff; /* Asegúrate que el texto en los selects también sea blanco */
            background-color: #333; /* Opcional: Cambia el fondo de los inputs/selects en modo oscuro */
        }
        /* Mantén los estilos para el modo claro */
        .input-white {
            background-color: white !important;
            color: black !important;
            border: solid 1px gray;
        }

            .input-white::placeholder {
                color: gray !important;
            }

        /* Aplica los estilos en modo oscuro */
        .dark-style .input-white {
            background-color: #222 !important; /* Color de fondo oscuro */
            color: white !important; /* Texto blanco */
            border: solid 1px #666; /* Borde más oscuro */
        }

            .dark-style .input-white::placeholder {
                color: rgba(255, 255, 255, 0.6) !important; /* Placeholder más visible en oscuro */
            }

        /* Asegura que otros elementos también sean blancos en modo oscuro */
        .dark-style .form-label,
        .dark-style .form-control,
        .dark-style .form-addons,
        .dark-style .icon-black,
        .dark-style h4,
        .dark-style p,
        .dark-style label,
        .dark-style span {
            color: #fff !important;
        }

        /* Ajusta el color de los botones o iconos */
        .dark-style .input-group-text {
            color: white !important;
            background-color: #444 !important;
        }

        /* Ajustar estilos cuando el navegador autocompleta */
        .dark-style input:-webkit-autofill {
            background-color: #222 !important; /* Asegura que tenga un fondo oscuro */
            color: white !important; /* Texto blanco */
            -webkit-text-fill-color: white !important; /* Para Safari y Chrome */
            border: 1px solid #666 !important;
        }

        /* Asegurar que el texto sea blanco en autofill en otros navegadores */
        .dark-style input:-moz-autofill {
            background-color: #222 !important;
            color: white !important;
        }

        .dark-style input:-ms-autofill {
            background-color: #222 !important;
            color: white !important;
        }

    </style>
</head>
<body class="account-page">

    <!-- Main Wrapper -->

  


<div class="authentication-wrapper authentication-cover">
  <!-- Logo -->
  <a href="/" class="app-brand auth-cover-brand">
    <span class="app-brand-logo">
        <!-- SVG del logo aquí -->
        <img src="/logo1.png" style="width: 80px"
             alt="auth-login-cover"
             class="my-5 auth-illustration"   />
    </span>
    @* <span class="app-brand-text demo text-heading fw-bold">Vuexy</span> *@
    
  </a>
  <!-- /Logo -->

  <div class="authentication-inner row m-0">
    <!-- /Left Text -->
    <div class="d-none d-lg-flex col-lg-8 p-0">
      <div class="auth-cover-bg auth-cover-bg-color d-flex justify-content-center align-items-center">
                    <img src="/img/illustrations/auth-login-illustration-light.png"
                         alt="auth-login-cover"
                         class="my-5 auth-illustration"
                         data-app-light-img="/img/illustrations/auth-login-illustration-light.png"
                         data-app-dark-img="/img/illustrations/auth-login-illustration-dark.png" />

                    <img src="/img/illustrations/bg-shape-image-light.png"
                         alt="auth-login-cover"
                         class="platform-bg"
                         data-app-light-img="illustrations/bg-shape-image-light.png"
                         data-app-dark-img="illustrations/bg-shape-image-dark.png" />
      </div>
    </div>
    <!-- /Left Text -->



    <!-- Login -->     
    <div class="d-flex col-12 col-lg-4 align-items-center authentication-bg p-sm-12 p-6">
      <div class="w-px-400 mx-auto mt-12 pt-5">
        <h4 class="mb-1">@ViewLocalizer["Bienvenido"] 👋</h4>
        <p class="mb-6">@ViewLocalizer["Please login into your account"]</p>
             
        <!-- Formulario de Inicio de Sesión -->
           <form  method="post" asp-controller="Account" asp-action="Login">
          @Html.AntiForgeryToken()  <!-- Token anti-falsificación -->
                        @if (Model.SelectDatabase)
                        {
                            @Html.HiddenFor(model => model.SelectDatabase)
                            @Html.HiddenFor(model => model.UserName)
                            @Html.HiddenFor(model => model.Password)
                            @Html.HiddenFor(model => model.CaptchaCode)
                            <div class="form-login">
                                <label>@ViewLocalizer["Company"]</label>
                                <div class="pass-group">
                                    <select asp-for="Database" asp-items="SelectDatabase" class="form-control input-white"></select>
                                </div>
                            </div>
                        }
                        else
                        {

                            <div class="form-login">
                                <label>@ViewLocalizer["Username"]</label>
                                <div class="form-addons">
                                    <input class="form-control input-white" type="text" placeholder="@ViewLocalizer["Enter your username or email address"]" asp-for="UserName" required>
                               
                                </div>
                            </div>
                            <div class="mb-6 form-password-toggle">
                                <label class="form-label" for="password">@ViewLocalizer["Password"]</label>
                                <div class="input-group input-group-merge">
                                    <input type="password"
                                           id="password"
                                           class="form-control input-white"
                                           name="password"
                                           placeholder="&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;"
                                           aria-describedby="password" />
                                    <span id="show-password" class="input-group-text cursor-pointer"><i id="show-password-icon" class="ti ti-eye-off"></i></span>
                                </div>
                            </div>
                            <div class="form-login">
                                <div>
                                    <div style="float: left; width: 50%; text-align: center;">
                                        <img id="img-captcha" src='@Url.Action("GetCaptchaImage")' />
                                    </div>
                                    <div style=" float: left; width: 50%;">
                                        <div class="pass-group">
                                            <input type="text"
                                                   asp-for="CaptchaCode"
                                                   class="form-control input-white"
                                                   placeholder="@ViewLocalizer["Captcha Code"]"
                                                   autocomplete="off"
                                                   minlength="4"
                                                   maxlength="4" />
                                            <span asp-validation-for="CaptchaCode" class="text-danger"></span><br />
                                        </div>
                                    </div>
                                </div>
                            </div>
                       

                        

                       
                        }


                        <button class="btn btn-primary d-grid w-100" href="javascript:void(0);">@ViewLocalizer["Entrar"]</button>
                      
            
        </form>
                    <div class="d-flex justify-content-between">
                        <div class="p-2">
                            <a class="dropdown-item" href="javascript:void(0);" data-theme="light">
                                <span class="align-middle"><i class="ti ti-sun ti-md me-3"></i>Light</span>
                            </a>
                        </div>
                        <div class="p-2">
                            <a class="dropdown-item" href="javascript:void(0);" data-theme="dark">
                                <span class="align-middle"><i class="ti ti-moon-stars ti-md me-3"></i>Dark</span>
                            </a>
                        </div>
                    </div>

                  

        @*<p class="text-center">
          <span>New on our platform?</span>
          <a href="auth-register-cover.html">
            <span>Create an account</span>
          </a>
        </p>

        <div class="divider my-6">
          <div class="divider-text">or</div>
        </div>

        <div class="d-flex justify-content-center">
          <a href="javascript:;" class="btn btn-sm btn-icon rounded-pill btn-text-facebook me-1_5">
            <i class="tf-icons ti ti-brand-facebook-filled"></i>
          </a>
          <a href="javascript:;" class="btn btn-sm btn-icon rounded-pill btn-text-twitter me-1_5">
            <i class="tf-icons ti ti-brand-twitter-filled"></i>
          </a>
          <a href="javascript:;" class="btn btn-sm btn-icon rounded-pill btn-text-github me-1_5">
            <i class="tf-icons ti ti-brand-github-filled"></i>
          </a>
          <a href="javascript:;" class="btn btn-sm btn-icon rounded-pill btn-text-google-plus">
            <i class="tf-icons ti ti-brand-google-filled"></i>
          </a>
        </div>*@
      </div>
    </div>               
    <!-- /Login -->
  </div>
        
</div>

    <!-- /Main Wrapper -->
  
    <script src="/vendor/libs/jquery/jquery.js"> </script>
    <script src="/vendor/libs/popper/popper.js"></script>
    <script src="/vendor/js/bootstrap.js"></script>
    <script src="/vendor/libs/node-waves/node-waves.js"></script>
    <script src="/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="/vendor/libs/hammer/hammer.js"></script>
    <script src="/vendor/libs/i18n/i18n.js"></script>
    <script src="/vendor/libs/typeahead-js/typeahead.js"></script>
    <script src="/vendor/js/menu.js"></script>

    <!-- endbuild -->
    <!-- Vendors JS -->
    <script src="/vendor/libs/form-validation/popular.js"></script>
    <script src="/vendor/libs/form-validation/bootstrap5.js"></script>
    <script src="/vendor/libs/form-validation/auto-focus.js"></script>

    <!-- Main JS -->
  @*   <script src="/js/main.js"></script> *@

    <!-- Page JS -->
@*     <script src="/js/pages-auth.js"></script> *@
    <script>
        $(document).ready(function () {
            $("#submit").click(function () {
                $("form").submit();
            });

            $("#show-password").click(function () {
                if($("#show-password-icon").attr('class') === "ti ti-eye-off"){
                    $("#show-password-icon").removeClass('ti ti-eye-off').addClass('ti ti-eye');
                    $("#password").attr('type', 'text');
                }
                else{
                    $("#show-password-icon").removeClass('ti ti-eye').addClass('ti ti-eye-off');
                    $("#password").attr('type', 'password');

                }

            })
        });

        // Selecciona todos los enlaces del tema
        const themeLinks = document.querySelectorAll('.dropdown-item');

        // Agrega un evento a cada enlace
        themeLinks.forEach(link => {
            link.addEventListener('click', function () {
                const selectedTheme = this.getAttribute('data-theme');
                const htmlElement = document.documentElement; // <html>

                if (selectedTheme === 'dark') {
                    // Cambia el atributo data-style a "dark" y la clase a "dark-style"
                    htmlElement.setAttribute('data-style', 'dark');
                    htmlElement.classList.add('dark-style');
                    htmlElement.classList.remove('light-style');
                } else if (selectedTheme === 'light') {
                    // Cambia el atributo data-style a "light" y la clase a "light-style"
                    htmlElement.setAttribute('data-style', 'light');
                    htmlElement.classList.add('light-style');
                    htmlElement.classList.remove('dark-style');
                }

                // Opcional: Guardar la selección en el almacenamiento local para que persista
                localStorage.setItem('theme', selectedTheme);
            });
        });

        // Aplicar el tema guardado al cargar la página
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            const htmlElement = document.documentElement;
            if (savedTheme === 'dark') {
                htmlElement.setAttribute('data-style', 'dark');
                htmlElement.classList.add('dark-style');
            } else if (savedTheme === 'light') {
                htmlElement.setAttribute('data-style', 'light');
                htmlElement.classList.add('light-style');
            }
        }
    </script>

</body>
</html> 
